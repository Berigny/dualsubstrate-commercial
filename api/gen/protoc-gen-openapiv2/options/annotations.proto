syntax = "proto2";

package protoc_gen_openapiv2.options;

option go_package = "github.com/grpc-ecosystem/grpc-gateway/protoc-gen-openapiv2/options";
option java_multiple_files = true;
option java_outer_classname = "Openapiv2AnnotationsProto";
option java_package = "com.google.api.openapi";
option objc_class_prefix = "GPB";

import "google/api/annotations.proto";
import "protoc-gen-openapiv2/options/openapiv2.proto";

extend google.protobuf.MethodOptions {
  optional OpenAPIMethodAnnotation openapiv2_operation = 104502;
}

extend google.protobuf.MessageOptions {
  optional OpenAPIMessageAnnotation openapiv2_schema = 104503;
}

extend google.protobuf.ServiceOptions {
  optional OpenAPIServiceAnnotation openapiv2_tag = 104504;
  optional Swagger openapiv2_swagger = 104503;
}

message OpenAPIMethodAnnotation {
  repeated APIConfig additional_bindings = 1;
  optional APIConfig deprecated_additional_binding = 2 [deprecated=true];
  optional google.protobuf.Any request = 3;
  optional google.protobuf.Any response = 4;
}

message OpenAPIMessageAnnotation {
  optional google.protobuf.Any message = 1;
}

message OpenAPIServiceAnnotation {
  optional string tag = 1;
  optional string description = 2;
}

message APIConfig {
  optional google.api.HttpRule http = 1;
  repeated OpenAPIMessageAnnotation response_objects = 2;
  optional string authentication_provider = 3;
}

